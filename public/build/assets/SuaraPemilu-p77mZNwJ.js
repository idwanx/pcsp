import{q as F,r as l,W as J,y as M,j as e,a as V,d as w}from"./app-nCXZzFNg.js";import{A as W}from"./App-xKpkt0wE.js";import{u as $,l as h,A as z}from"./usePrevious-RcPGbfnC.js";import{P as G,U as H}from"./Panel-0kg8dqD5.js";import Q from"./SideBar-MnTilLEt.js";import{P as X}from"./Pagination-HGvUS5E2.js";import{T as Y}from"./TextInput-VI-YMmhl.js";import Z from"./PanelKandidat-sapXiMOm.js";import{B as b}from"./ButtonIcon-I5FuSpe_.js";import{I as ee}from"./InputError-Gv2_bQh5.js";import{S as se}from"./Select-BRKFdcxn.js";import{A as ae}from"./ArrowLongRightIcon-O2qnF_sr.js";import{A as te}from"./ArrowLeftCircleIcon-Ut6LC6RW.js";import"./transition-0NtjhKbH.js";import"./dialog-ZmFfFdO3.js";import"./XMarkIcon-FFXCJTey.js";import"./Bars3Icon-eKeLUyZQ.js";import"./UserCircleIcon-i5yCOVII.js";import"./UserIcon-7wF1mC3A.js";import"./ResponsiveSideBarLink-r34_q2Ec.js";import"./ComputerDesktopIcon-04Ci-PRv.js";import"./ArrowRightIcon-r2SHST5b.js";const re=({active:i=!1,className:d="",children:n,...c})=>e.jsx(w,{...c,className:`tracking-wide group relative flex items-center gap-x-2 rounded-lg p-2 text-sm ${i?"border-gray-400 text-gray-700 bg-gray-200 focus:text-gray-800 focus:bg-gray-100 focus:border-gray-700":"border-transparent text-gray-500 hover:text-gray-800 hover:bg-slate-100 hover:border-gray-300 focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300"} text-base font-medium focus:outline-none transition duration-150 ease-in-out ${d}`,children:n});function le(i){const{data:d,meta:n}=i.tpsuara,{partai:c,tahun:o,pemilu:m,menupemilu:k,dapil:x,filtered:g,kecamatans:S}=F().props,[_,u]=l.useState(!1),[a,j]=l.useState(""),[P,C]=l.useState([]),p=k.filter(s=>s.id==m.id).flatMap(s=>s.dapils),{data:f,setData:y,post:I,errors:A,processing:T}=J({suara_rusak:""}),K=()=>{window.history.back()},B=s=>{j(s),C(s),u(!0)},D=s=>{s.preventDefault(),I(route("inputsuara.storesuararusak",{partai:c,tahun:o,tpsuara:a.id}),{preserveScroll:!0})},R=s=>{j(s),y({...f,tpsuara_id:s.id,suara_rusak:s.suararusaks_count})},[t,v]=l.useState({kecamatan:g.kecamatan||"",cari:g.cari||""}),E=$(t),L=l.useCallback(h.debounce(s=>{M.get(route(route().current(),{partai:c,tahun:o,pemilu:m.id,dapil:x.id}),s,{replace:!0,preserveScroll:!0,preserveState:!0})},500),[]);l.useEffect(()=>{if(E){const s=Object.keys(h.pickBy(t)).length?h.pickBy(t):"";L(s)}},[t]);function N(s){const r=s.target.name,U=s.target.value;v(q=>({...q,[r]:U}))}function O(){v({kecamatan:"",cari:""})}return e.jsxs(e.Fragment,{children:[e.jsx(V,{title:"Suara TPS"}),e.jsx(G,{isOpen:_,closeable:!0,setIsOpen:u,children:e.jsx(Z,{model:P,setIsPanelKandidat:u,judul:"Perolahen Suara"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 sm:gap-6",children:[e.jsx("div",{className:"hidden sm:w-1/5 lg:block md:hidden",children:e.jsxs("div",{className:"space-y-4 -mt-12 pt-12 lg:sticky lg:top-8 lg:col-start-2 lg:row-span-2 lg:row-start-1 lg:overflow-hidden",children:[e.jsx(Q,{}),e.jsx("div",{className:"flex",children:e.jsx("div",{className:"relative w-full overscroll-auto",children:e.jsx("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"sticky top-0",children:e.jsx("p",{className:"text-md font-semibold text-gray-600",children:"Daftar Dapil"})}),p==null?void 0:p.map((s,r)=>e.jsxs(re,{className:"flex items-center text-sm",href:route(route().current(),{partai:c,tahun:o,pemilu:m.id,dapil:s.id}),active:x?x.id==s.id:"",children:[e.jsx(ae,{className:"h-5 w-5","aria-hidden":"true"}),s.nama_dapil]},r))]})})})})]})}),e.jsx("div",{className:"w-full lg:w-4/5 sm:w-full",children:e.jsxs("div",{className:"flex lg:gap-6 sm:gap-2 lg:p-0 p-2",children:[e.jsx("div",{className:"w-full shrink-0 lg:w-2/3 md:w-2/3",children:e.jsxs("div",{className:"space-y-3 bg-white shadow-sm sm:rounded-lg text-sm p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"focus:outline-none text-base sm:text-lg md:text-xl lg:text-xl font-bold leading-normal text-gray-600",children:"Daftar TPS"}),e.jsx("button",{type:"button",onClick:()=>K(),children:e.jsx(te,{className:"w-7 h-7 text-gray-400 hover:text-purple-500"})})]}),e.jsx("hr",{}),e.jsx("div",{className:"flex flex-col lg:pt-6 sm:pt-4 lg:pb-0 pb-4 lg:flex-row  text-sm lg:items-center lg:justify-between w-full",children:e.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-4 lg:gap-2",children:[e.jsx("div",{className:"relative",children:e.jsxs(se,{id:"kecamatan",name:"kecamatan",className:"block w-full",value:t.kecamatan,onChange:N,children:[e.jsx("option",{value:"",children:"Filter Kecamatan"}),S.map(s=>e.jsx("option",{value:s.id,children:s.nama_kecamatan},s.id))]})}),e.jsx("div",{className:"relative"}),e.jsx("div",{className:"relative",children:e.jsxs("label",{className:"relative block",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-2",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{id:"cari",name:"cari",type:"text",placeholder:"cari desa",className:"block w-full pl-9 placeholder:italic rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-gray-600 sm:text-sm sm:leading-6",value:t.cari,onChange:N})]})}),e.jsx("div",{className:"relative",children:e.jsxs(b,{onClick:O,children:[e.jsx(z,{className:"hidden lg:block h-5 w-5 text-gray-400 group-hover:text-purple-500 group-focus:text-purple-500","aria-hidden":"true"}),e.jsx("span",{className:"lg:hidden sm:block",children:"Reset"})]})})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-fixed",children:[e.jsx("thead",{className:"uppercase text-xs rounded-t-lg bg-gray-100",children:e.jsxs("tr",{className:"text-center font-semibold text-gray-600 border-b",children:[e.jsx("th",{style:{width:"4%"},className:"p-3 text-center",children:"No"}),e.jsxs("th",{style:{width:"22%"},className:"p-3 text-left",children:["Kecamatan/",e.jsx("br",{}),"Desa"]}),e.jsx("th",{style:{width:"24%"},className:"p-3 text-left",children:"Nama TPS"}),e.jsx("th",{style:{width:"10%"},className:"p-3 text-center",children:"Jumlah Pemilih"}),e.jsx("th",{style:{width:"10%"},className:"p-3 text-center",children:"Suara Sah"}),e.jsx("th",{style:{width:"10%"},className:"p-3 text-center",children:"Suara Rusak"}),e.jsx("th",{style:{width:"10%"},className:"p-3 text-center",children:"Sisa Suara"}),e.jsx("th",{style:{width:"10%"},className:"p-3 text-center",children:"Aksi"})]})}),e.jsx("tbody",{className:"text-gray-500",children:d.map((s,r)=>e.jsxs("tr",{className:"border-b border-opacity-20 hover:bg-slate-50",children:[e.jsx("td",{className:"px-3 py-2 text-center font-medium",children:n.from+r}),e.jsxs("td",{className:"px-3 py-2 text-left",children:[s.nama_kecamatan,"/",e.jsx("br",{}),s.nama_desa]}),e.jsx("td",{className:"px-3 py-2 text-left",children:e.jsx(w,{className:"underline",onClick:()=>R(s),preserveState:!0,children:s.nama_tpsuara})}),e.jsx("td",{className:"px-3 py-2 text-center",children:s.jlh_pemilih}),e.jsx("td",{className:"px-3 py-2 text-center",children:s.calontpsuaras_count}),e.jsx("td",{className:"px-3 py-2 text-center",children:s.suararusaks_count}),e.jsx("td",{className:"px-3 py-2 text-center",children:s.jlh_pemilih-(s.calontpsuaras_count+s.suararusaks_count)}),e.jsx("td",{className:"px-3 py-2 text-center",children:e.jsx("button",{onClick:()=>B(s),children:e.jsx(H,{className:"w-4 h-4 inline text-gray-600 -mt-0.5"})})})]},r))})]})}),e.jsx("div",{className:"flex justify-center text-sm pt-6",children:e.jsx(X,{meta:n})})]})}),e.jsx("div",{className:"hidden md:block lg:w-1/3 md:w-1/3",children:e.jsx("div",{className:"space-y-4 -mt-12 pt-12 lg:sticky lg:top-8 lg:col-start-2 lg:row-span-2 lg:row-start-1 lg:overflow-hidden",children:e.jsx("div",{className:"flex",children:e.jsx("div",{className:"relative w-full overscroll-auto",children:e.jsx("div",{className:"relative bg-white py-2 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("div",{className:"sticky top-0 px-4",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Info TPS"})}),e.jsx("hr",{className:"mt-2"}),e.jsx("div",{className:"lg:h-[38rem] 2xl:h-[44rem] overflow-x-hidden overflow-y-auto pt-4 px-4",children:e.jsx("div",{className:"mt-1",children:e.jsxs("dl",{className:"divide-y divide-gray-100",children:[e.jsxs("div",{className:"grid grid-cols-3 py-0.5 items-center",children:[e.jsx("div",{className:"text-sm font-medium leading-6 text-gray-900",children:"Nama TPS"}),e.jsx("div",{className:"text-sm col-span-2 leading-6 text-gray-700",children:a.nama_tpsuara})]}),e.jsxs("div",{className:"grid grid-cols-3 py-0.5 items-center",children:[e.jsx("div",{className:"text-sm font-medium leading-6 text-gray-900",children:"Desa"}),e.jsx("div",{className:"text-sm leading-6 text-gray-700",children:a.nama_desa})]}),e.jsxs("div",{className:"grid grid-cols-3 py-0.5 items-center",children:[e.jsx("div",{className:"text-sm font-medium leading-6 text-gray-900",children:"Kecamatan"}),e.jsx("div",{className:"text-sm leading-6 text-gray-700",children:a.nama_kecamatan})]}),e.jsxs("div",{className:"grid grid-cols-3 py-0.5 items-center",children:[e.jsx("div",{className:"text-sm font-medium leading-6 text-gray-900",children:"Jlh. Pemilih"}),e.jsx("div",{className:"text-sm leading-6 text-gray-700",children:a.jlh_pemilih})]}),e.jsxs("div",{className:"grid grid-cols-3 py-0.5 items-center",children:[e.jsx("div",{className:"text-sm font-medium leading-6 text-gray-900",children:"Suara Sah"}),e.jsx("div",{className:"text-sm leading-6 text-gray-700",children:a.calontpsuaras_count})]}),e.jsxs("div",{className:"grid grid-cols-3 py-0.5 items-center",children:[e.jsx("div",{className:"text-sm font-medium leading-6 text-gray-900",children:"Suara Rusak"}),a?e.jsxs("form",{onSubmit:D,className:"flex col-span-2 mt-1 gap-2 items-center justify-between",children:[e.jsx(Y,{id:"suara_rusak",type:"number",name:"suara_rusak",value:f.suara_rusak,className:"block w-full",autoComplete:"suara_rusak",onChange:s=>y("suara_rusak",s.target.value)}),e.jsx("span",{children:e.jsx(b,{disabled:T,children:e.jsx("span",{children:"Update"})})})]}):""]}),e.jsx(ee,{message:A.suara_rusak,className:"mt-2"})]})})})]})})})})})})]})})]})]})}le.layout=i=>e.jsx(W,{children:i});export{le as default};
