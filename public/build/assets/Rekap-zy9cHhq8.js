import{q as P,r as x,y as A,j as e,a as E}from"./app-gFMPlfFG.js";import{A as K}from"./App-Yq7EDqfb.js";import{u as _,l as m}from"./usePrevious-Ae9NiC3N.js";import B from"./SideBar-vqyuzDpy.js";import{S as q}from"./Select-5NWjV2-m.js";import{A as D}from"./ArrowLeftCircleIcon-sybs2y9u.js";import{U as I}from"./UserCircleIcon-tqWB4i9l.js";import"./transition-3NtC3HxP.js";import"./dialog-UcGOCiMZ.js";import"./XMarkIcon-FHicnVp5.js";import"./Bars3Icon-wk1QohPp.js";import"./UserIcon-o70zhd7g.js";import"./ResponsiveSideBarLink-cF3PEdtH.js";import"./ArrowRightIcon-lMvARGF9.js";function O(){var h;const{partai:c,tahun:p,pemilu:u,filtered:j,partais:f,dapils:g,hasil:n}=P().props,y=()=>{window.history.back()},i=n==null?void 0:n.flatMap(a=>[a.n1,a.n3,a.n5,a.n7,a.n9,a.n11]),o=i==null?void 0:i.sort((a,s)=>s.nilai-a.nilai),d=o==null?void 0:o.slice(0,6),N=d==null?void 0:d.reduce((a,s)=>{const{partai:l}=s;return a[l]||(a[l]=[]),a[l].push({logo:s.logo,calonpartai:s.calons}),a},{}),w=f.reduce((a,s)=>a=a+s.jumlah_suara+s.suara_partai,0),[r,b]=x.useState({wilayah:j.wilayah||""}),v=_(r),k=x.useCallback(m.debounce(a=>{A.get(route(route().current(),{partai:c,tahun:p,pemilu:u.id}),a,{replace:!0,preserveScroll:!0,preserveState:!0})},500),[]);x.useEffect(()=>{if(v){const a=Object.keys(m.pickBy(r)).length?m.pickBy(r):"";k(a)}},[r]);function S(a){const s=a.target.name,l=a.target.value;b(t=>({...t,[s]:l})),setCalon([]),setState(null)}return e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Perolehan Kursi"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 sm:gap-6",children:[e.jsx("div",{className:"hidden sm:w-1/5 lg:block md:hidden",children:e.jsx("div",{className:"space-y-4 -mt-12 pt-12 lg:sticky lg:top-8 lg:col-start-2 lg:row-span-2 lg:row-start-1 lg:overflow-hidden",children:e.jsx(B,{})})}),e.jsx("div",{className:"w-full lg:w-4/5 sm:w-full",children:e.jsx("div",{className:"flex lg:gap-6 sm:gap-2 lg:p-0 p-2",children:e.jsx("div",{className:"w-full shrink-0",children:e.jsxs("div",{className:"space-y-3 bg-white shadow-sm sm:rounded-lg text-sm p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"focus:outline-none text-base sm:text-lg md:text-xl lg:text-xl font-bold leading-normal text-gray-600",children:"Perolehan Kursi Partai"}),e.jsx("button",{type:"button",onClick:()=>y(),children:e.jsx(D,{className:"w-7 h-7 text-gray-400 hover:text-purple-500"})})]}),e.jsx("hr",{}),e.jsx("div",{className:"flex items-center pt-4 justify-between w-full",children:e.jsx("div",{className:"relative",children:e.jsxs(q,{id:"wilayah",name:"wilayah",className:"block w-full",value:r.wilayah,onChange:S,children:[e.jsx("option",{value:"",children:"Semua Dapil"}),g.map(a=>e.jsx("option",{value:a.id,children:a.nama_dapil},a.id))]})})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-fixed",children:[e.jsx("thead",{className:"uppercase text-xs rounded-t-lg bg-gray-100",children:e.jsxs("tr",{className:"text-center font-semibold text-gray-600 border-b",children:[e.jsx("th",{style:{width:"10%"},className:"p-3 text-center",children:"No"}),e.jsx("th",{style:{width:"75%"},className:"p-3 text-left",children:"Nama Partai / Calon"}),e.jsx("th",{style:{width:"15%"},className:"p-3 text-center",children:"Jumlah Kursi"})]})}),e.jsx("tbody",{className:"text-gray-500",children:n.length>0&&w>0?(h=Object.entries(N))==null?void 0:h.map(([a,s],l)=>e.jsxs("tr",{className:"border-b border-opacity-20 hover:bg-slate-50 align-top",children:[e.jsx("td",{className:"px-3 py-2 text-center font-medium",children:l+1}),e.jsx("td",{className:"px-3 py-2 border-l border-opacity-20 text-left",children:e.jsxs("div",{className:"flex min-w-0 gap-x-4",children:[(s==null?void 0:s[0])==null?e.jsx("img",{className:"h-14 w-14 flex-none rounded-md bg-gray-50",src:"/images/no-camera.png",alt:""}):e.jsx("img",{className:"h-14 w-14 flex-none rounded-md bg-gray-50",src:`/storage/${s[0].logo}`,alt:""}),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"min-w-0 flex-auto",children:e.jsx("p",{className:"text-base text-gray-600",children:a})}),e.jsxs("div",{className:"min-w-0 flex-auto pt-4",children:[e.jsx("p",{className:"text-ms text-rose-600",children:"Calon dengan suara terbanyak:"}),e.jsx("ul",{role:"list",className:"divide-y divide-gray-200",children:s==null?void 0:s[0].calonpartai.slice(0,s.length).map((t,C)=>e.jsxs("li",{className:"flex py-2 items-center",children:[t.foto==null?e.jsx(I,{className:"w-12 h-12 stroke-gray-400 stroke-1 inline -mt-0.5"}):e.jsx("img",{className:"h-12 w-12 flex-none rounded-full bg-gray-50",src:`/storage/${t.foto}`,alt:""}),e.jsx("div",{className:"ml-4 flex flex-1 flex-col min-w-0",children:e.jsxs("div",{className:"min-w-0 flex-auto",children:[e.jsx("div",{className:"flex justify-between text-md font-medium text-gray-600",children:e.jsx("h3",{className:"truncate max-w-readable",children:t.user.name})}),e.jsxs("p",{className:"truncate text-xs text-gray-500 max-w-readable",children:["Perolehan Suara: ",t.calontpsuaras_count]})]})})]},C))})]})]})]})}),e.jsxs("td",{className:"px-3 py-2 text-center border-l border-opacity-20",children:[s.length," Kursi"]})]},a)):e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"py-6",children:"Silahkan pilih dapil untuk melihat perolehan kursi partai."})})})]})})]})})})})]})]})}O.layout=c=>e.jsx(K,{children:c});export{O as default};
