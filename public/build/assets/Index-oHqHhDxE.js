import{q as I,r as m,W as M,y as p,j as e,a as P,d as y}from"./app-7fvQ5Scf.js";import{A as T}from"./App-1mKv2Q5t.js";import{M as f,D as F}from"./DangerButton-9n_OJxxK.js";import A from"./UpdateSuaraForm-OMGnbXIb.js";import{S as B}from"./SecondaryButton-MmDHgK4B.js";import{B as E}from"./ButtonIcon-qfbxSOgL.js";import{T as U}from"./TextInput-Fy0CU0Hx.js";import{E as K,P as L,T as R}from"./TrashIcon-GMM940r1.js";import{C as $,P as q,M as z}from"./PaperClipIcon-GVLIl25V.js";import"./transition-zUs-P6BS.js";import"./dialog-Uw00bcFK.js";import"./XMarkIcon-VHl6mHre.js";import"./Bars3Icon-WHCGwQXd.js";import"./UserCircleIcon-IWOkVVvD.js";import"./UserIcon-KKtIa3HA.js";import"./PrimaryButton-YGo28ET1.js";import"./InputError-fqdYLu5-.js";const H=({active:r=!1,className:t="",children:i,...a})=>e.jsx(y,{...a,className:`tracking-wide group relative flex items-center gap-x-2 rounded-lg py-1.5 px-2 text-sm ${r?"border-gray-400 text-gray-700 bg-gray-200 focus:text-gray-800 focus:bg-gray-100 focus:border-gray-700":"border-transparent text-gray-500 hover:text-gray-800 hover:bg-gray-100 hover:border-gray-300 focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300"} text-base font-medium focus:outline-none transition duration-150 ease-in-out ${t}`,children:i});function J(){const{partai:r,tahun:t,menutps:i,tps:a,pemilu:l}=I().props,[d,x]=m.useState(""),c=l==null?void 0:l.map(s=>s.dapil_tpsuaras).flatMap(s=>s.calontpsuaras),[j,u]=m.useState(!1),[N,g]=m.useState(!1),{data:v,setData:b,put:w,processing:k}=M({suara_rusak:(a==null?void 0:a.suara_rusak)||""}),S=s=>{x(s),u(!0)},o=()=>{u(!1)},_=()=>{p.delete(route("suaramasuk.destroydokumen",{partai:r,tahun:t,dokumentpsuara:d.id}),{preserveScroll:!0,onSuccess:()=>{o()}})},C=s=>{s.preventDefault(),w(route("suaramasuk.updatesuararusak",{partai:r,tahun:t,suararusak:a==null?void 0:a.suararusak_id}),{preserveScroll:!0})},D=s=>{x(s),g(!0)},h=()=>{g(!1)};return Echo.channel("suara-masuk").listen("SuaraMasuk",()=>{p.reload()}),e.jsxs(e.Fragment,{children:[e.jsx(P,{title:"Suara Masuk"}),e.jsx(f,{isOpen:N,closeable:!1,onClose:h,size:"sm",children:e.jsx(A,{model:d,isClose:h,submitLabel:"Kirim",title:"Lapor Suara"})}),e.jsxs(f,{isOpen:j,closeable:!0,onClose:o,size:"sm",children:[e.jsx("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx(K,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),e.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Konfirmasi"}),e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Apakah anda yakin ",e.jsx("span",{className:"text-red-500",children:d.keterangan})," akan dihapus?"]})})]})]})}),e.jsxs("div",{className:"bg-slate-100 gap-4 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[e.jsx(F,{onClick:_,children:"Hapus"}),e.jsx(B,{onClick:o,children:"Batal"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 sm:gap-6",children:[e.jsx("div",{className:"hidden sm:w-1/5 lg:block md:hidden",children:e.jsx("div",{className:"flex flex-shrink-0 flex-col",children:e.jsx("div",{className:"relative w-full overscroll-auto",children:e.jsx("div",{className:"relative bg-white py-2 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"sticky top-0 px-4",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Suara Masuk"})}),e.jsx("div",{className:"lg:h-[34rem] 2xl:h-[44rem] overflow-x-hidden overflow-y-auto px-4",children:i==null?void 0:i.map((s,n)=>e.jsxs(H,{className:"flex justify-between mt-2 items-start text-sm",href:route("suaramasuk.listsuara",{partai:r,tahun:t,tpsuara:s.id}),active:a?a.id==s.id:"",children:[e.jsxs("div",{className:"min-w-0 flex-auto",children:[e.jsx("p",{className:"truncate text-sm font-semibold text-gray-600 max-w-readable",children:s==null?void 0:s.nama_tpsuara}),e.jsxs("p",{className:"truncate text-xs text-gray-500 max-w-readable",children:["Suara: ",s==null?void 0:s.nama_pemilu]})]}),e.jsx("span",{className:"inline-flex items-center rounded-md bg-red-600 px-2 py-0.5 text-sm font-semibold text-white ring-1 ring-inset ring-green-600/20",children:s.jlh_suara_masuk})]},n))})]})})})})}),e.jsx("div",{className:"w-full lg:w-4/5 sm:w-full",children:e.jsxs("div",{className:"flex lg:gap-6 sm:gap-2 lg:p-0 p-2",children:[e.jsx("div",{className:"w-full shrink-0 lg:w-2/3 md:w-2/3",children:e.jsxs("div",{className:"space-y-2 bg-white shadow-sm sm:rounded-lg text-sm py-2 p-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"focus:outline-none text-base sm:text-lg md:text-xl lg:text-xl font-bold leading-normal text-gray-600",children:"Verfikasi Suara"})}),e.jsx("hr",{}),e.jsxs("div",{className:"pt-4 font-bold text-gray-600",children:["Suara Pemilu ",l==null?void 0:l[0].nama_pemilu]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-fixed",children:[e.jsx("thead",{className:"uppercase text-xs rounded-t-lg bg-gray-100",children:e.jsxs("tr",{className:"text-center font-semibold text-gray-600 border-b",children:[e.jsx("th",{style:{width:"7%"},className:"p-3 text-center",children:"No"}),e.jsx("th",{style:{width:"53%"},className:"p-3 text-left",children:"Nama"}),e.jsx("th",{style:{width:"20%"},className:"p-3 text-center",children:"Jumlah Suara"}),e.jsx("th",{style:{width:"20%"},className:"p-3 text-center",children:"Aksi"})]})}),e.jsx("tbody",{className:"text-gray-500",children:c==null?void 0:c.map((s,n)=>e.jsxs("tr",{className:"border-b border-opacity-20 hover:bg-slate-50",children:[e.jsx("td",{className:"px-3 py-2 text-center font-medium",children:"-"}),e.jsx("td",{className:"px-3 py-2 text-left",children:e.jsxs("div",{className:"flex min-w-0 gap-x-4",children:[s.calon.foto==null?e.jsx("img",{className:"h-16 w-16 flex-none rounded-full bg-gray-50",src:"/images/no-camera.png",alt:""}):e.jsx("img",{className:"h-16 w-16 flex-none rounded-full bg-gray-50",src:`/storage/${s.calon.foto}`,alt:""}),e.jsxs("div",{className:"min-w-0 flex-auto",children:[e.jsx("p",{className:"text-base text-gray-700",children:s.calon.user.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.calon.partai.nama_partai}),e.jsxs("p",{className:"text-xs text-gray-500",children:["No. Urut: ",s.calon.no_urut]})]})]})}),e.jsx("td",{className:"px-3 py-2 text-center",children:s.jlh_suara_tps}),e.jsx("td",{className:"px-3 py-2 text-center items-center",children:e.jsxs("div",{className:"ml-2 flex-shrink-0 justify-between space-x-2",children:[e.jsx("button",{type:"button",className:"group inline-flex justify-center rounded-md px-1 py-1 text-sm font-medium hover:ring-1 ring-gray-300 focus:outline-none focus:ring-2 focus:bg-gray-50 focus:ring-gray-300 transition ease-in-out duration-150",onClick:()=>D(s),children:e.jsx(L,{className:"h-4 w-4 text-gray-400 group-hover:text-gray-500 group-focus:text-gray-500"})}),e.jsx(y,{href:route("suaramasuk.approvesuara",{partai:r,tahun:t,calonTpsuara:s.id}),className:"group inline-flex justify-center rounded-md px-1 py-1 text-sm font-medium hover:ring-1 ring-gray-300 focus:outline-none focus:ring-2 focus:bg-gray-50 focus:ring-gray-300 transition ease-in-out duration-150",preserveScroll:!0,children:e.jsx($,{className:"h-4 w-4 text-gray-400 group-hover:text-gray-500 group-focus:text-gray-500"})})]})})]},n))})]})})]})}),e.jsx("div",{className:"hidden md:block lg:w-1/3 md:w-1/3",children:e.jsx("div",{className:"space-y-4 -mt-12 pt-12 lg:sticky lg:top-8 lg:col-start-2 lg:row-span-2 lg:row-start-1 lg:overflow-hidden",children:e.jsx("div",{className:"flex",children:e.jsx("div",{className:"relative w-full overscroll-auto",children:e.jsx("div",{className:"relative bg-white py-2 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("div",{className:"sticky top-0 px-4",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Data TPS"})}),e.jsx("hr",{className:"mt-2"}),e.jsxs("div",{className:"2xl:h-[44rem] lg:h-[34rem] md:h-[28rem] overflow-x-hidden overflow-y-auto px-4",children:[e.jsx("div",{className:"mt-1",children:e.jsxs("dl",{className:"divide-y divide-gray-100",children:[e.jsxs("div",{className:"grid grid-cols-3 py-0.5 items-center",children:[e.jsx("div",{className:"text-sm font-medium leading-6 text-gray-900",children:"Nama TPS"}),e.jsx("div",{className:"text-sm col-span-2 leading-6 text-gray-700",children:a==null?void 0:a.nama_tpsuara})]}),e.jsxs("div",{className:"grid grid-cols-3 py-0.5 items-center",children:[e.jsx("div",{className:"text-sm font-medium leading-6 text-gray-900",children:"Desa"}),e.jsx("div",{className:"text-sm leading-6 text-gray-700",children:a==null?void 0:a.nama_desa})]}),e.jsxs("div",{className:"grid grid-cols-3 py-0.5 items-center",children:[e.jsx("div",{className:"text-sm font-medium leading-6 text-gray-900",children:"Kecamatan"}),e.jsx("div",{className:"text-sm leading-6 text-gray-700",children:a==null?void 0:a.nama_kecamatan})]}),e.jsxs("div",{className:"grid grid-cols-3 py-0.5 items-center",children:[e.jsx("div",{className:"text-sm font-medium leading-6 text-gray-900",children:"Jlh. Pemilih"}),e.jsx("div",{className:"text-sm leading-6 text-gray-700",children:a==null?void 0:a.jlh_pemilih})]}),e.jsxs("div",{className:"grid grid-cols-3 py-0.5 items-center",children:[e.jsx("div",{className:"text-sm font-medium leading-6 text-gray-900",children:"Suara Sah"}),e.jsx("div",{className:"text-sm leading-6 text-gray-700",children:a==null?void 0:a.suara_sah})]}),e.jsxs("div",{className:"grid grid-cols-3 py-0.5 items-center",children:[e.jsx("div",{className:"text-sm font-medium leading-6 text-gray-900",children:"Suara Rusak"}),a&&(a==null?void 0:a.suara_rusak)!==null?e.jsxs("form",{onSubmit:C,className:"flex col-span-2 mt-1 gap-2 items-center justify-between",children:[e.jsx(U,{id:"suara_rusak",type:"number",name:"suara_rusak",value:v.suara_rusak,className:"block w-full",autoComplete:"suara_rusak",onChange:s=>b("suara_rusak",s.target.value)}),e.jsx("span",{children:e.jsx(E,{disabled:k,children:e.jsx("span",{children:"Approve"})})})]}):"-"]})]})}),e.jsx("div",{className:"px-4 py-6 sm:grid sm:grid-cols-1 sm:gap-4 sm:px-0",children:e.jsx("dd",{className:"mt-2 text-sm text-gray-900 sm:col-span-2 sm:mt-0",children:e.jsx("ul",{role:"list",className:"divide-y divide-gray-100 rounded-md border border-gray-200",children:a==null?void 0:a.dokumentpsuaras.map((s,n)=>e.jsxs("li",{className:"flex items-center justify-between p-2 text-sm leading-6",children:[e.jsxs("div",{className:"flex w-0 flex-1 items-center",children:[e.jsx(q,{className:"h-4 w-4 flex-shrink-0 text-gray-400","aria-hidden":"true"}),e.jsx("div",{className:"ml-1 flex min-w-0 flex-1 gap-2",children:e.jsx("span",{className:"truncate font-medium",children:s.keterangan})})]}),e.jsxs("div",{className:"ml-2 flex-shrink-0 space-x-2",children:[e.jsx("a",{className:"group inline-flex justify-center rounded-md px-1 py-1 text-sm font-medium hover:ring-1 ring-gray-300 focus:outline-none focus:ring-2 focus:bg-gray-50 focus:ring-gray-300 transition ease-in-out duration-150",href:route("suaramasuk.downloaddokumen",{partai:r.alias,tahun:t,dokumentpsuara:s.id}),target:"_blank",children:e.jsx(z,{className:"h-4 w-4 text-gray-400 group-hover:text-gray-500 group-focus:text-gray-500"})}),e.jsx("button",{type:"button",className:"group inline-flex justify-center rounded-md px-1 py-1 text-sm font-medium hover:ring-1 ring-gray-300 focus:outline-none focus:ring-2 focus:bg-gray-50 focus:ring-gray-300 transition ease-in-out duration-150",onClick:()=>S(s),children:e.jsx(R,{className:"h-4 w-4 text-gray-400 group-hover:text-gray-500 group-focus:text-gray-500"})})]})]},n))})})})]})]})})})})})})]})})]})]})}J.layout=r=>e.jsx(T,{children:r});export{J as default};
