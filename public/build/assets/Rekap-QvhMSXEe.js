import{q as $,r as t,y as C,j as e,a as P}from"./app-_NsvenZT.js";import{A as E}from"./App-VUsh0IiV.js";import{u as F,l as u}from"./usePrevious-y_g5MXyv.js";import A from"./SideBar-ZgkvEB8y.js";import{S as D}from"./Select-R_BFbpeP.js";import{A as I}from"./ArrowLeftCircleIcon-xdnzFpak.js";import{U as p}from"./UsersIcon-dVlsuNKg.js";import{U as R}from"./UserCircleIcon-T8caNw7l.js";import"./transition-agmw12hf.js";import"./dialog-WjFBbHXl.js";import"./XMarkIcon-HcqWQZmB.js";import"./Bars3Icon-KZZzF-OO.js";import"./UserIcon-BrlIDSpW.js";import"./ResponsiveSideBarLink-YAzugfXk.js";import"./ArrowRightIcon-am8Tt9dc.js";function U(){const{partai:c,tahun:m,pemilu:x,filtered:n,partais:i,dapils:g,totalpemilih:j}=$().props,[d,h]=t.useState([]),[o,f]=t.useState(null),w=()=>{window.history.back()};t.useEffect(()=>{if(o){async function l(){await fetch(route("rekapsuarapartai.getcalonpartai",{partai:o,tahun:m,pemilu:x.id,wilayah:n?n.wilayah:""})).then(a=>a.json()).then(a=>h(a.datacalon))}l()}},[o]);const s=j.reduce((l,a)=>l=l+a.total_pemilih,0),[r,y]=t.useState({wilayah:n.wilayah||""}),N=F(r),b=t.useCallback(u.debounce(l=>{C.get(route(route().current(),{partai:c,tahun:m,pemilu:x.id}),l,{replace:!0,preserveScroll:!0,preserveState:!0})},500),[]);t.useEffect(()=>{if(N){const l=Object.keys(u.pickBy(r)).length?u.pickBy(r):"";b(l)}},[r]);function v(l){const a=l.target.name,S=l.target.value;y(k=>({...k,[a]:S})),h([]),f(null)}const _=l=>{f(l)};return e.jsxs(e.Fragment,{children:[e.jsx(P,{title:"Rekap Suara Partai"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 sm:gap-6",children:[e.jsx("div",{className:"hidden sm:w-1/5 lg:block md:hidden",children:e.jsx("div",{className:"space-y-4 -mt-12 pt-12 lg:sticky lg:top-8 lg:col-start-2 lg:row-span-2 lg:row-start-1 lg:overflow-hidden",children:e.jsx(A,{})})}),e.jsx("div",{className:"w-full lg:w-4/5 sm:w-full",children:e.jsxs("div",{className:"flex lg:gap-6 sm:gap-2 lg:p-0 p-2",children:[e.jsx("div",{className:"w-full shrink-0 lg:w-2/3 md:w-2/3",children:e.jsxs("div",{className:"space-y-3 bg-white shadow-sm sm:rounded-lg text-sm p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"focus:outline-none text-base sm:text-lg md:text-xl lg:text-xl font-bold leading-normal text-gray-600",children:"Rekapitulasi Suara Partai"}),e.jsx("button",{type:"button",onClick:()=>w(),children:e.jsx(I,{className:"w-7 h-7 text-gray-400 hover:text-purple-500"})})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex items-center pt-4 justify-between w-full",children:[e.jsx("div",{className:"relative",children:e.jsxs(D,{id:"wilayah",name:"wilayah",className:"block w-full",value:r.wilayah,onChange:v,children:[e.jsx("option",{value:"",children:"Semua Dapil"}),g.map(l=>e.jsx("option",{value:l.id,children:l.nama_dapil},l.id))]})}),e.jsxs("div",{className:"flex tems-center text-base text-gray-600",children:["Total Pemilih: ",Number(s).toLocaleString("id-ID")]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-fixed",children:[e.jsx("thead",{className:"uppercase text-xs rounded-t-lg bg-gray-100",children:e.jsxs("tr",{className:"text-center font-semibold text-gray-600 border-b",children:[e.jsx("th",{style:{width:"5%"},className:"p-3 text-center",children:"No"}),e.jsx("th",{style:{width:"45%"},className:"p-3 text-left",children:"Nama Partai"}),e.jsx("th",{style:{width:"20%"},className:"p-3 text-center",children:"Perolehan Suara"}),e.jsx("th",{style:{width:"20%"},className:"p-3 text-center",children:"Persentase"}),e.jsx("th",{style:{width:"10%"},className:"p-3 text-center",children:"Calon"})]})}),e.jsx("tbody",{className:"text-gray-500",children:i==null?void 0:i.map((l,a)=>e.jsxs("tr",{className:"border-b border-opacity-20 hover:bg-slate-50",children:[e.jsx("td",{className:"px-3 py-2 text-center font-medium",children:a+1}),e.jsx("td",{className:"px-3 py-2 text-left",children:e.jsxs("div",{className:"flex min-w-0 gap-x-4 items-center",children:[l.logo==null?e.jsx("img",{className:"h-14 w-14 flex-none rounded-md bg-gray-50",src:"/images/no-camera.png",alt:""}):e.jsx("img",{className:"h-14 w-14 flex-none rounded-md bg-gray-50",src:`/storage/${l.logo}`,alt:""}),e.jsx("div",{className:"min-w-0 flex-auto",children:e.jsx("p",{className:"text-base text-gray-600 leading-6",children:l.nama_partai})})]})}),e.jsx("td",{className:"px-3 py-2 text-center",children:l.jumlah_suara}),e.jsxs("td",{className:"px-3 py-2 text-center",children:[parseFloat(l.jumlah_suara/s*100).toFixed(2),"%"]}),e.jsx("td",{className:"px-3 py-2 text-center",children:e.jsx("button",{onClick:()=>_(l.alias),children:e.jsx(p,{className:"w-4 h-4 inline text-gray-600 -mt-0.5"})})})]},a))})]})})]})}),e.jsx("div",{className:"hidden md:block lg:w-1/3 md:w-1/3",children:e.jsx("div",{className:"space-y-4 -mt-12 pt-12 lg:sticky lg:top-8 lg:col-start-2 lg:row-span-2 lg:row-start-1 lg:overflow-hidden",children:e.jsx("div",{className:"flex",children:e.jsx("div",{className:"relative w-full overscroll-auto",children:e.jsx("div",{className:"relative bg-white py-2 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("div",{className:"sticky top-0 px-4",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Daftar Calon"})}),e.jsx("hr",{className:"mt-2"}),e.jsx("div",{className:"lg:h-[34rem] 2xl:h-[44rem] overflow-x-hidden overflow-y-auto pt-4 px-4",children:e.jsx("ul",{role:"list",className:"divide-y divide-gray-200",children:d.length>0?d.map((l,a)=>e.jsxs("li",{className:"flex py-3 items-center",children:[l.foto==null?e.jsx(R,{className:"w-16 h-16 stroke-gray-400 stroke-1 inline -mt-0.5"}):e.jsx("img",{className:"h-16 w-16 flex-none rounded-full bg-gray-50",src:`/storage/${l.foto}`,alt:""}),e.jsxs("div",{className:"ml-4 flex flex-1 flex-col min-w-0",children:[e.jsxs("div",{className:"min-w-0 flex-auto",children:[e.jsx("div",{className:"flex justify-between text-md font-medium text-gray-600",children:e.jsx("h3",{className:"truncate max-w-readable",children:l.name})}),e.jsx("p",{className:"truncate text-xs text-gray-500 max-w-readable",children:l.nama_partai})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("div",{className:"flex justify-center w-1/5 text-lg font-medium mr-0.5 text-gray-600",children:l.calontpsuaras_count}),e.jsxs("div",{className:"flex justify-center w-4/5",children:[e.jsx("div",{className:"flex items-center w-4/6 mr-2.5",children:e.jsx("div",{className:"overflow-hidden bg-gray-200 h-1.5 rounded-full w-full",children:l.warna=="merah"?e.jsx("span",{className:"h-full bg-red-600 w-full block rounded-full",style:{width:`${l.calontpsuaras_count/s*100+"%"}`}}):l.warna=="rose"?e.jsx("span",{className:"h-full bg-rose-600 w-full block rounded-full",style:{width:`${l.calontpsuaras_count/s*100+"%"}`}}):l.warna=="hijau"?e.jsx("span",{className:"h-full bg-green-600 w-full block rounded-full",style:{width:`${l.calontpsuaras_count/s*100+"%"}`}}):l.warna=="orange"?e.jsx("span",{className:"h-full bg-orange-600 w-full block rounded-full",style:{width:`${l.calontpsuaras_count/s*100+"%"}`}}):l.warna=="kuning"?e.jsx("span",{className:"h-full bg-yellow-500 w-full block rounded-full",style:{width:`${l.calontpsuaras_count/s*100+"%"}`}}):l.warna=="biru"?e.jsx("span",{className:"h-full bg-blue-600 w-full block rounded-full",style:{width:`${l.calontpsuaras_count/s*100+"%"}`}}):l.warna=="biru-langit"?e.jsx("span",{className:"h-full bg-sky-500 w-full block rounded-full",style:{width:`${l.calontpsuaras_count/s*100+"%"}`}}):l.warna=="biru-tua"?e.jsx("span",{className:"h-full bg-blue-800 w-full block rounded-full",style:{width:`${l.calontpsuaras_count/s*100+"%"}`}}):l.warna=="hitam"?e.jsx("span",{className:"h-full bg-gray-800 w-full block rounded-full",style:{width:`${l.calontpsuaras_count/s*100+"%"}`}}):e.jsx("span",{className:"h-full bg-red-600 w-full block rounded-full",style:{width:`${l.calontpsuaras_count/s*100+"%"}`}})})}),e.jsxs("div",{className:"flex justify-center w-2/6 text-lg font-medium text-gray-600",children:[l.calontpsuaras_count&&s!==0?parseFloat(l.calontpsuaras_count/s*100).toFixed(2):0,"%"]})]})]})]})]},a)):e.jsxs("div",{children:["Silahkan klik ikon ",e.jsx(p,{className:"w-4 h-4 inline text-gray-600 -mt-0.5"})," pada tabel untuk melihat calon."]})})})]})})})})})})]})})]})]})}U.layout=c=>e.jsx(E,{children:c});export{U as default};
