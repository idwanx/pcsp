import{q as C,r as o,j as s,d as S}from"./app-c964lvNw.js";import{T as F}from"./TextInput-BTpbUPav.js";import{M as I}from"./Modal-f3GcA3Bm.js";import A from"./SuaraPartaiForm-7IyGtXGT.js";import{X as K}from"./XMarkIcon-nCPybAah.js";import{U as P}from"./UserCircleIcon-v_gQvU4d.js";import"./transition-J0ZczVuE.js";import"./dialog-zljltxjJ.js";import"./SecondaryButton-oUsJKskN.js";import"./PrimaryButton-_6TgZozi.js";import"./InputLabel-nG4PxVU3.js";function $({setIsPanelKandidat:j,model:i,judul:f}){const{partai:d,dapil:g,tahun:c}=C().props,[y,m]=o.useState(!1),[N,_]=o.useState([]),[n,p]=o.useState([{id:"",nama_partai:"",suarapartai:{jlh_suara:""},calons:[{id:"",foto:"",user:{name:""},calontpsuaras:{id:"",jlh_suara_tps:""}}]}]);o.useEffect(()=>{if(i.id){async function e(){await fetch(route("inputsuara.kandidat",{partai:d,tahun:c,dapil:g.id,tpsuara:i.id})).then(r=>r.json()).then(r=>{const a=r.dataKandidat.map(t=>({id:t.id,nama_partai:t.nama_partai,logo:t.logo,suarapartai:t.suarapartai,calons:[...t.calons.map(l=>{var x,h;return{...l,calon_id:(x=l.calontpsuaras)==null?void 0:x.calon_id,jlh_suara_tps:((h=l.calontpsuaras)==null?void 0:h.jlh_suara_tps)||""}})]}));p(a)})}e()}},[i.id]);const b=()=>{j(!1)},v=e=>{_({partai:e,tps:i.id}),m(!0)},u=()=>{m(!1)},w=(e,r,a)=>{let t=[...n];t[e].calons[r][a.target.name]=a.target.value,p(t)};return s.jsxs(s.Fragment,{children:[s.jsx(I,{isOpen:y,closeable:!1,onClose:u,size:"xs",children:s.jsx(A,{isClose:u,model:N})}),s.jsxs("div",{className:"flex-1 overflow-y-auto py-4 px-4 sm:px-6",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:f}),s.jsx("div",{className:"ml-3 flex h-7 items-center",children:s.jsxs("button",{type:"button",className:"-m-2 p-2 text-gray-400 hover:text-gray-500",onClick:()=>b(),children:[s.jsx("span",{className:"sr-only",children:"Close panel"}),s.jsx(K,{className:"h-6 w-6","aria-hidden":"true"})]})})]}),s.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["Dari jumlah suara sah ",i.nama_tpsuara]}),s.jsx("hr",{className:"mt-2"}),s.jsx("div",{className:"py-4",children:s.jsx("div",{className:"flow-root",children:s.jsx("div",{className:"grid grid-cols-1 gap-2 divide-y",children:n==null?void 0:n.map((e,r)=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex pb-6 py-4",children:[s.jsx("img",{className:"h-16 w-16 flex-none rounded-md bg-gray-50",src:`/storage/${e.logo}`,alt:""}),s.jsxs("div",{className:"ml-2 truncate flex-1 flex-col min-w-0 text-base",children:[s.jsx("span",{className:"font-semibold",children:e.nama_partai}),s.jsx("div",{className:"flex",children:s.jsx("button",{type:"button",onClick:()=>v(e),className:"rounded-md bg-white px-2.5 py-1.5 text-sm text-gray-500 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",children:"Input Suara Partai"})})]})]}),s.jsx("div",{className:"ml-2 space-y-4 border-l-2 border-dashed",children:e==null?void 0:e.calons.map((a,t)=>s.jsxs("div",{className:"relative w-full",children:[s.jsx(P,{className:"h-7 w-7 absolute -top-0.5 z-10 -ml-3.5 text-gray-400"}),s.jsxs("div",{className:"ml-6",children:[s.jsx("h4",{className:"font-bold text-gray-800",children:a.user.name}),s.jsx("form",{children:s.jsxs("div",{className:"grid grid-cols-3 mt-2 gap-4 items-center",children:[s.jsx("div",{className:"text-gray-500 flex justify-end",children:"Jlh.Suara"}),s.jsx("div",{className:"max-w-screen-sm",children:s.jsx(F,{id:"jlh_suara_tps",type:"number",name:"jlh_suara_tps",value:a==null?void 0:a.jlh_suara_tps,className:"block w-full",autoComplete:"jlh_suara_tps",onChange:l=>w(r,t,l),required:!0})}),s.jsx("div",{className:"flex",children:s.jsx(S,{className:"inline-flex items-center px-4 py-2 bg-gray-700 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-600 focus:bg-gray-600 active:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition ease-in-out duration-150",method:"post",as:"button",href:route("inputsuara.storesuara",{partai:d,tahun:c}),data:{calon_id:a==null?void 0:a.id,tpsuara_id:i.id,jlh_suara_tps:a==null?void 0:a.jlh_suara_tps},children:s.jsx("span",{className:"text-white",children:"Simpan"})})})]})})]})]},a.id))})]},r))})})})]})]})}export{$ as default};
