import{q as K,r as i,y as w,j as e,a as D,d as E}from"./app-pBgRUvg6.js";import{A as F}from"./App-QG3ABdyc.js";import{u as L,l as p}from"./usePrevious-BGDz9UtE.js";import{P as T}from"./Panel-ZDLrY-sl.js";import R from"./SideBar-20cm_bH4.js";import{P as U}from"./Pagination-1hWS3pFo.js";import M from"./CardTotal-OOQhVBn4.js";import O from"./CardPerDapil-RxOcqFIc.js";import q from"./PanelKandidat-8w4_106P.js";import{S as V}from"./Select-MAwt7yDq.js";import{B as z}from"./ButtonIcon-2EjfBysu.js";import{A as J}from"./ArrowLongRightIcon-yElpXhOc.js";import{A as W}from"./ArrowLeftCircleIcon-avLJFw42.js";import{A as G}from"./ArrowPathIcon-Qakw4cuF.js";import{U as H}from"./UsersIcon-Q-WOvqe0.js";import{U as Q}from"./UserCircleIcon-CNhGavHs.js";import"./transition-DrOEGpSs.js";import"./dialog-bunlMmV7.js";import"./XMarkIcon-7Q6Hkh4o.js";import"./Bars3Icon-3uZUGKGF.js";import"./UserIcon-w599fSmO.js";import"./ResponsiveSideBarLink-lE0ZWDMs.js";import"./ComputerDesktopIcon-ESgi-bwk.js";import"./ArrowRightIcon-BOTMtVsv.js";import"./TextInput-zKmir3P8.js";const X=({active:r=!1,className:o="",children:d,...u})=>e.jsx(E,{...u,className:`tracking-wide group relative flex items-center gap-x-2 rounded-lg p-2 text-sm ${r?"border-gray-400 text-gray-700 bg-gray-200 focus:text-gray-800 focus:bg-gray-100 focus:border-gray-700":"border-transparent text-gray-500 hover:text-gray-800 hover:bg-slate-100 hover:border-gray-300 focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300"} text-base font-medium focus:outline-none transition duration-150 ease-in-out ${o}`,children:d});function Y(r){const{data:o,meta:d}=r.tpsuara,{partai:u,tahun:f,pemilu:c,menupemilu:N,dapil:n,suaraperdapils:m,filterdapil:a,filtered:g,kecamatans:b}=K().props,[v,x]=i.useState(!1),[_,k]=i.useState([]),h=N.filter(s=>s.id==c.id).flatMap(s=>s.dapils),S=()=>{window.history.back()},P=s=>{k(s),x(!0)},[t,j]=i.useState({kecamatan:g.kecamatan||"",cari:g.cari||""}),C=L(t),$=i.useCallback(p.debounce(s=>{w.get(route(route().current(),{partai:u,tahun:f,pemilu:c.id,dapil:n.id}),s,{replace:!0,preserveScroll:!0,preserveState:!0})},500),[]);i.useEffect(()=>{if(C){const s=Object.keys(p.pickBy(t)).length?p.pickBy(t):"";$(s)}},[t]);function y(s){const l=s.target.name,I=s.target.value;j(B=>({...B,[l]:I}))}function A(){j({kecamatan:"",cari:""})}return Echo.channel("suara-masuk").listen("SuaraMasuk",({suaramasuk:s})=>{w.reload()}),e.jsxs(e.Fragment,{children:[e.jsx(D,{title:"Suara TPS"}),e.jsx(T,{isOpen:v,closeable:!0,setIsOpen:x,children:e.jsx(q,{model:_,setIsPanelKandidat:x,judul:"Perolahen Suara"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 sm:gap-6",children:[e.jsx("div",{className:"hidden sm:w-1/5 lg:block md:hidden",children:e.jsxs("div",{className:"space-y-4 -mt-12 pt-12 lg:sticky lg:top-8 lg:col-start-2 lg:row-span-2 lg:row-start-1 lg:overflow-hidden",children:[e.jsx(R,{}),e.jsx("div",{className:"flex",children:e.jsx("div",{className:"relative w-full overscroll-auto",children:e.jsx("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"sticky top-0",children:e.jsx("p",{className:"text-md font-semibold text-gray-600",children:"Daftar Dapil"})}),h==null?void 0:h.map((s,l)=>e.jsxs(X,{className:"flex items-center text-sm",href:route(route().current(),{partai:u,tahun:f,pemilu:c.id,dapil:s.id}),active:n?n.id==s.id:"",children:[e.jsx(J,{className:"h-5 w-5","aria-hidden":"true"}),s.nama_dapil]},l))]})})})})]})}),e.jsx("div",{className:"w-full lg:w-4/5 sm:w-full",children:e.jsxs("div",{className:"flex lg:gap-6 sm:gap-2 lg:p-0 p-2",children:[e.jsxs("div",{className:"w-full shrink-0 lg:w-2/3 md:w-2/3",children:[e.jsxs("div",{className:"mb-4 focus:outline-none text-base sm:text-lg md:text-xl lg:text-xl font-bold leading-normal text-gray-600",children:["Suara Pemilu ",c.nama_pemilu," - ",c.tahun]}),e.jsx(M,{}),e.jsxs("div",{className:"space-y-3 bg-white shadow-sm sm:rounded-lg text-sm p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"focus:outline-none text-base sm:text-lg md:text-xl lg:text-xl font-bold leading-normal text-gray-600",children:n.nama_dapil}),e.jsx("button",{type:"button",onClick:()=>S(),children:e.jsx(W,{className:"w-7 h-7 text-gray-400 hover:text-purple-500"})})]}),e.jsx("hr",{}),e.jsx(O,{}),e.jsx("div",{className:"flex flex-col lg:pt-6 sm:pt-4 lg:pb-0 pb-4 lg:flex-row  text-sm lg:items-center lg:justify-between w-full",children:e.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-4 lg:gap-2",children:[e.jsx("div",{className:"relative",children:e.jsxs(V,{id:"kecamatan",name:"kecamatan",className:"block w-full",value:t.kecamatan,onChange:y,children:[e.jsx("option",{value:"",children:"Filter Kecamatan"}),b.map(s=>e.jsx("option",{value:s.id,children:s.nama_kecamatan},s.id))]})}),e.jsx("div",{className:"relative",children:e.jsxs("label",{className:"relative block",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-2",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{id:"cari",name:"cari",type:"text",placeholder:"cari desa",className:"block w-full pl-9 placeholder:italic rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-gray-600 sm:text-sm sm:leading-6",value:t.cari,onChange:y})]})}),e.jsx("div",{className:"relative",children:e.jsxs(z,{onClick:A,children:[e.jsx(G,{className:"hidden lg:block h-5 w-5 text-gray-400 group-hover:text-purple-500 group-focus:text-purple-500","aria-hidden":"true"}),e.jsx("span",{className:"lg:hidden sm:block",children:"Reset"})]})})]})}),o.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-fixed",children:[e.jsx("thead",{className:"uppercase text-xs rounded-t-lg bg-gray-100",children:e.jsxs("tr",{className:"text-center font-semibold text-gray-600 border-b",children:[e.jsx("th",{style:{width:"4%"},className:"p-3 text-center",children:"No"}),e.jsxs("th",{style:{width:"22%"},className:"p-3 text-left",children:["Kecamatan/",e.jsx("br",{}),"Desa"]}),e.jsx("th",{style:{width:"19%"},className:"p-3 text-left",children:"Nama TPS"}),e.jsx("th",{style:{width:"10%"},className:"p-3 text-center",children:"Jumlah Pemilih"}),e.jsx("th",{style:{width:"10%"},className:"p-3 text-center",children:"Suara Sah"}),e.jsx("th",{style:{width:"10%"},className:"p-3 text-center",children:"Suara Rusak"}),e.jsx("th",{style:{width:"10%"},className:"p-3 text-center",children:"Sisa Suara"}),e.jsx("th",{style:{width:"15%"},className:"p-3 text-center",children:"Calon"})]})}),e.jsx("tbody",{className:"text-gray-500",children:o.map((s,l)=>e.jsxs("tr",{className:"border-b border-opacity-20 hover:bg-slate-50",children:[e.jsx("td",{className:"px-3 py-2 text-center font-medium",children:d.from+l}),e.jsxs("td",{className:"px-3 py-2 text-left",children:[s.nama_kecamatan,"/",e.jsx("br",{}),s.nama_desa]}),e.jsx("td",{className:"px-3 py-2 text-left",children:s.nama_tpsuara}),e.jsx("td",{className:"px-3 py-2 text-center",children:s.jlh_pemilih}),e.jsx("td",{className:"px-3 py-2 text-center",children:s.calontpsuaras_count}),e.jsx("td",{className:"px-3 py-2 text-center",children:s.suararusaks_count}),e.jsx("td",{className:"px-3 py-2 text-center",children:s.jlh_pemilih-(s.calontpsuaras_count+s.suararusaks_count)}),e.jsx("td",{className:"px-3 py-2 text-center",children:e.jsx("button",{onClick:()=>P(s),children:e.jsx(H,{className:"w-4 h-4 inline text-gray-600 -mt-0.5"})})})]},l))})]})}),e.jsx("div",{className:"flex justify-center text-sm pt-6",children:e.jsx(U,{meta:d})})]}):e.jsx("div",{className:"text-sm text-gray-500 mt-4",children:"Tidak ada TPS di Dapil ini"})]})]}),e.jsx("div",{className:"hidden md:block lg:w-1/3 md:w-1/3",children:e.jsx("div",{className:"space-y-4 -mt-12 pt-12 lg:sticky lg:top-8 lg:col-start-2 lg:row-span-2 lg:row-start-1 lg:overflow-hidden",children:e.jsx("div",{className:"flex",children:e.jsx("div",{className:"relative w-full overscroll-auto",children:e.jsx("div",{className:"relative bg-white py-2 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"sticky top-0 px-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Perolehan Suara"}),e.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["Dari jumlah suara sah ",n.nama_dapil]})]}),e.jsx("hr",{className:"mt-2"}),e.jsx("div",{className:"lg:h-[34rem] 2xl:h-[44rem] overflow-x-hidden overflow-y-auto pt-4 px-4",children:e.jsx("ul",{role:"list",className:"divide-y divide-gray-200",children:m==null?void 0:m.map((s,l)=>e.jsxs("li",{className:"flex py-3 items-center",children:[s.foto==null?e.jsx(Q,{className:"w-16 h-16 stroke-gray-400 stroke-1 inline -mt-0.5"}):e.jsx("img",{className:"h-16 w-16 flex-none rounded-full bg-gray-50",src:`/storage/${s.foto}`,alt:""}),e.jsxs("div",{className:"ml-4 flex flex-1 flex-col min-w-0",children:[e.jsxs("div",{className:"min-w-0 flex-auto",children:[e.jsx("div",{className:"flex justify-between text-md font-medium text-gray-600",children:e.jsx("h3",{className:"truncate max-w-readable",children:s.name})}),e.jsx("p",{className:"truncate text-xs text-gray-500 max-w-readable",children:s.nama_partai})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("div",{className:"flex justify-center w-1/5 text-lg font-medium mr-0.5 text-gray-600",children:s.calontpsuaras_count}),e.jsxs("div",{className:"flex justify-center w-4/5",children:[e.jsx("div",{className:"flex items-center w-4/6 mr-2.5",children:e.jsx("div",{className:"overflow-hidden bg-gray-200 h-1.5 rounded-full w-full",children:s.warna=="merah"?e.jsx("span",{className:"h-full bg-red-600 w-full block rounded-full",style:{width:`${s.calontpsuaras_count/a.suara_sah*100+"%"}`}}):s.warna=="rose"?e.jsx("span",{className:"h-full bg-rose-600 w-full block rounded-full",style:{width:`${s.calontpsuaras_count/a.suara_sah*100+"%"}`}}):s.warna=="hijau"?e.jsx("span",{className:"h-full bg-green-600 w-full block rounded-full",style:{width:`${s.calontpsuaras_count/a.suara_sah*100+"%"}`}}):s.warna=="orange"?e.jsx("span",{className:"h-full bg-orange-600 w-full block rounded-full",style:{width:`${s.calontpsuaras_count/a.suara_sah*100+"%"}`}}):s.warna=="kuning"?e.jsx("span",{className:"h-full bg-yellow-500 w-full block rounded-full",style:{width:`${s.calontpsuaras_count/a.suara_sah*100+"%"}`}}):s.warna=="biru"?e.jsx("span",{className:"h-full bg-blue-600 w-full block rounded-full",style:{width:`${s.calontpsuaras_count/a.suara_sah*100+"%"}`}}):s.warna=="biru-langit"?e.jsx("span",{className:"h-full bg-sky-500 w-full block rounded-full",style:{width:`${s.calontpsuaras_count/a.suara_sah*100+"%"}`}}):s.warna=="biru-tua"?e.jsx("span",{className:"h-full bg-blue-800 w-full block rounded-full",style:{width:`${s.calontpsuaras_count/a.suara_sah*100+"%"}`}}):s.warna=="hitam"?e.jsx("span",{className:"h-full bg-gray-800 w-full block rounded-full",style:{width:`${s.calontpsuaras_count/a.suara_sah*100+"%"}`}}):e.jsx("span",{className:"h-full bg-red-600 w-full block rounded-full",style:{width:`${s.calontpsuaras_count/a.suara_sah*100+"%"}`}})})}),e.jsxs("div",{className:"flex justify-center w-2/6 text-lg font-medium text-gray-600",children:[s.calontpsuaras_count&&a.suara_sah!==0?parseFloat(s.calontpsuaras_count/a.suara_sah*100).toFixed(2):0,"%"]})]})]})]})]},l))})})]})})})})})})]})})]})]})}Y.layout=r=>e.jsx(F,{children:r});export{Y as default};
