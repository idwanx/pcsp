import{r as l,q,W as H,j as e,a as W,d as G,y as J}from"./app-9xEvUy4t.js";import{A as V}from"./App-91psZZeT.js";import{M as f}from"./Modal-zEWqHkyS.js";import Q from"./SideBar-hwDm54lX.js";import X from"./LaporForm-eUxQrjpN.js";import{B as D}from"./ButtonIcon-6gP3xja-.js";import Y from"./UploadDokumen-gG7GToUJ.js";import{D as Z}from"./DangerButton-df9LKXHM.js";import{S as ee}from"./SecondaryButton-uys5kj9D.js";import{T as se}from"./TextInput-BeyEL1pW.js";import{E as ae,P as re,T as te}from"./TrashIcon-_EI2bXJE.js";import{A as L}from"./ArrowLongRightIcon-VnTlAyyp.js";import{A as le}from"./ArrowLeftCircleIcon-8Y3negEV.js";import{C as ie,P as ne,M as oe}from"./PaperClipIcon-9EjBRM8_.js";import"./transition-d-kTC6mf.js";import"./dialog-FpC9pQol.js";import"./XMarkIcon-u0RyhjlB.js";import"./Bars3Icon-E8fqIXyu.js";import"./UserCircleIcon-9GV8Ki9I.js";import"./UserIcon-DEo123K5.js";import"./ResponsiveSideBarLink-Rnr2SYJv.js";import"./ComputerDesktopIcon-DSaafEj_.js";import"./ArrowRightIcon-L-GtA7_Z.js";import"./PrimaryButton-0SmQX5pu.js";import"./InputError-7zdi5Xix.js";import"./InputLabel-1vO1XyS5.js";import"./FileInput-Le3cB0vF.js";function de({title:i,titleId:r,...o},t){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},o),i?l.createElement("title",{id:r},i):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const ce=l.forwardRef(de),me=ce,xe=({active:i=!1,className:r="",children:o,...t})=>e.jsx(G,{...t,className:`tracking-wide group relative flex gap-x-2 rounded-lg p-2 text-sm ${i?"border-gray-400 text-gray-700 bg-gray-200 focus:text-gray-800 focus:bg-gray-100 focus:border-gray-700":"border-transparent text-gray-500 hover:text-gray-800 hover:bg-gray-100 hover:border-gray-300 focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300"} text-base font-medium focus:outline-none transition duration-150 ease-in-out ${r}`,children:o}),ue=({active:i=!1,className:r="",children:o,...t})=>e.jsx("button",{...t,className:`tracking-wide group relative flex gap-x-2 rounded-lg p-2 text-sm ${i?"w-full border-gray-400 text-gray-700 bg-gray-200 focus:text-gray-800 focus:bg-gray-200 focus:border-gray-700":"w-full border-transparent text-gray-500 hover:text-gray-800 hover:bg-gray-100 hover:border-gray-300 focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300"} text-base font-medium focus:outline-none transition duration-150 ease-in-out ${r}`,children:o});function pe(i){const{data:r,meta:o}=i.tpsuara,{partai:t,tahun:d,dapil:c,menudapil:m,pemilu:x}=q().props,[u,j]=l.useState([]),[p,T]=l.useState([]),[a,I]=l.useState(""),[P,y]=l.useState(!1),[A,N]=l.useState(!1),[F,v]=l.useState(!1),{data:b,setData:w,post:U,processing:B}=H({tpsuara_id:"",suara_rusak:""}),g=r.filter(s=>s.id==a.id).flatMap(s=>s.dokumentpsuaras),k=async()=>{try{const n=await(await fetch(route("laporsuara.kandidat",{partai:t,dapil:c.id,tpsuara:a.id}))).json();T(n.dataKandidat)}catch(s){console.log("error",s)}};l.useEffect(()=>{a.id&&k()},[a.id]);const E=()=>{window.history.back()},M=s=>{j(s),y(!0)},S=()=>{k(),y(!1)},K=()=>{N(!0)},_=()=>{N(!1)},R=s=>{j(s),v(!0)},h=()=>{v(!1)},$=()=>{J.delete(route("laporsuara.destroydokumen",{partai:t,tahun:d,dokumentpsuara:u.id}),{preserveScroll:!0,onSuccess:()=>{h()}})},O=s=>{s.preventDefault(),U(route("laporsuara.storesuararusak",{partai:t,tahun:d,tpsuara:a.id}),{preserveScroll:!0})},z=s=>{I(s),w({...b,tpsuara_id:s.id,suara_rusak:s.suararusaks_count})};return e.jsxs(e.Fragment,{children:[e.jsx(W,{title:"Suara TPS"}),e.jsx(f,{isOpen:A,closeable:!1,onClose:_,size:"sm",children:e.jsx(Y,{model:a.id,isClose:_,submitLabel:"Upload",title:"Upload Dokumen"})}),e.jsx(f,{isOpen:P,closeable:!1,onClose:S,size:"sm",children:e.jsx(X,{model:u,dataTps:a,isClose:S,submitLabel:"Kirim",title:"Lapor Suara"})}),e.jsxs(f,{isOpen:F,closeable:!0,onClose:h,size:"sm",children:[e.jsx("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx(ae,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),e.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Konfirmasi"}),e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Apakah anda yakin ",e.jsx("span",{className:"text-red-500",children:u.keterangan})," akan dihapus?"]})})]})]})}),e.jsxs("div",{className:"bg-slate-100 gap-4 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[e.jsx(Z,{onClick:$,children:"Hapus"}),e.jsx(ee,{onClick:h,children:"Batal"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 sm:gap-6",children:[e.jsx("div",{className:"hidden sm:w-1/5 lg:block md:hidden",children:e.jsxs("div",{className:"space-y-4 -mt-12 pt-12 lg:sticky lg:top-8 lg:col-start-2 lg:row-span-2 lg:row-start-1 lg:overflow-hidden",children:[e.jsx(Q,{}),e.jsx("div",{className:"flex",children:e.jsx("div",{className:"relative w-full overscroll-auto",children:e.jsx("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"sticky top-0",children:e.jsx("p",{className:"text-md font-semibold text-gray-600",children:"Daftar Dapil"})}),m==null?void 0:m.map((s,n)=>e.jsxs(xe,{className:"flex items-center text-sm",href:route(route().current(),{partai:t,tahun:d,pemilu:x.id,dapil:s.id}),active:c?c.id==s.id:"",children:[e.jsx(L,{className:"h-5 w-5","aria-hidden":"true"}),s.nama_dapil]},n))]})})})}),e.jsx("div",{className:"flex",children:e.jsx("div",{className:"relative w-full overscroll-auto",children:e.jsx("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"sticky top-0",children:e.jsx("p",{className:"text-md font-semibold text-gray-600",children:"Daftar TPS"})}),r==null?void 0:r.map((s,n)=>e.jsxs(ue,{onClick:()=>z(s),className:"flex items-start text-sm",active:a?s.id==a.id:"",children:[e.jsx(L,{className:"h-5 w-5","aria-hidden":"true"}),e.jsx("span",{className:"truncate max-w-readable",children:s.nama_tpsuara})]},n))]})})})})]})}),e.jsx("div",{className:"w-full lg:w-4/5 sm:w-full",children:e.jsxs("div",{className:"flex lg:gap-6 sm:gap-2 lg:p-0 p-2",children:[e.jsx("div",{className:"w-full shrink-0 lg:w-2/3 md:w-2/3",children:e.jsxs("div",{className:"space-y-3 bg-white shadow-sm sm:rounded-lg text-sm p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"focus:outline-none text-base sm:text-lg md:text-xl lg:text-xl font-bold leading-normal text-gray-600",children:"Lapor Perolehan Suara"}),e.jsx("button",{type:"button",onClick:()=>E(),children:e.jsx(le,{className:"w-7 h-7 text-gray-400 hover:text-gray-500"})})]}),e.jsx("hr",{}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("div",{className:"mt-4 pb-2 font-bold text-gray-600",children:["Perolehan Suara ",c.nama_dapil," ",a.nama_tpsuara,e.jsxs("p",{children:[x.nama_pemilu," - ",x.tahun]})]}),e.jsxs("table",{className:"w-full table-fixed",children:[e.jsx("thead",{className:"uppercase text-xs rounded-t-lg bg-gray-100",children:e.jsxs("tr",{className:"text-center font-semibold text-gray-600 border-b",children:[e.jsx("th",{style:{width:"5%"},className:"p-3 text-center",children:"No"}),e.jsx("th",{style:{width:"55%"},className:"p-3 text-left",children:"Nama"}),e.jsx("th",{style:{width:"25%"},className:"p-3 text-center",children:"Perolehan Suara"}),e.jsx("th",{style:{width:"15%"},className:"p-3 text-center",children:"Aksi"})]})}),e.jsx("tbody",{className:"text-gray-500",children:p==null?void 0:p.map((s,n)=>{var C;return e.jsxs("tr",{className:"border-b border-opacity-20 hover:bg-slate-50",children:[e.jsx("td",{className:"px-3 py-2 text-center font-medium",children:o.from+n}),e.jsx("td",{className:"px-3 py-2 text-left",children:e.jsxs("div",{className:"flex min-w-0 gap-x-4 items-center",children:[(s==null?void 0:s.foto)==null?e.jsx("img",{className:"h-12 w-12 flex-none rounded-full bg-gray-50",src:"/images/no-camera.png",alt:""}):e.jsx("img",{className:"h-12 w-12 flex-none rounded-full bg-gray-50",src:`/storage/${s.foto}`,alt:""}),e.jsxs("div",{className:"min-w-0 flex-auto",children:[e.jsx("p",{className:"text-base font-semibold leading-6",children:s.name}),e.jsx("p",{children:s.nama_partai}),e.jsxs("p",{children:["No. Urut : ",s.no_urut]})]})]})}),e.jsx("td",{className:"px-3 py-2 text-center",children:s.calontpsuaras==null?"belum terlapor":s.calontpsuaras.jlh_suara_tps}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("div",{className:"flex items-center justify-center",children:s.calontpsuaras===null||((C=s.calontpsuaras)==null?void 0:C.is_verified_at)===null?e.jsx("button",{onClick:()=>M(s),children:e.jsx(re,{className:"w-4 h-4 inline text-gray-600 -mt-0.5"})}):e.jsx(ie,{className:"h-4 w-4 text-green-500"})})})]},n)})})]})]})]})}),e.jsx("div",{className:"hidden md:block lg:w-1/3 md:w-1/3",children:e.jsx("div",{className:"space-y-4 -mt-12 pt-12 lg:sticky lg:top-8 lg:col-start-2 lg:row-span-2 lg:row-start-1 lg:overflow-hidden",children:e.jsx("div",{className:"flex",children:e.jsx("div",{className:"relative w-full overscroll-auto",children:e.jsx("div",{className:"relative bg-white py-2 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("div",{className:"sticky top-0 px-4",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Data TPS"})}),e.jsx("hr",{className:"mt-2"}),e.jsxs("div",{className:"2xl:h-[44rem] lg:h-[34rem] md:h-[28rem] overflow-x-hidden overflow-y-auto px-4",children:[e.jsx("div",{className:"mt-1",children:e.jsxs("dl",{className:"divide-y divide-gray-100",children:[e.jsxs("div",{className:"grid grid-cols-3 py-0.5 items-center",children:[e.jsx("div",{className:"text-sm font-medium leading-6 text-gray-900",children:"Nama TPS"}),e.jsx("div",{className:"text-sm col-span-2 leading-6 text-gray-700",children:a.nama_tpsuara})]}),e.jsxs("div",{className:"grid grid-cols-3 py-0.5 items-center",children:[e.jsx("div",{className:"text-sm font-medium leading-6 text-gray-900",children:"Desa"}),e.jsx("div",{className:"text-sm leading-6 text-gray-700",children:a.nama_desa})]}),e.jsxs("div",{className:"grid grid-cols-3 py-0.5 items-center",children:[e.jsx("div",{className:"text-sm font-medium leading-6 text-gray-900",children:"Kecamatan"}),e.jsx("div",{className:"text-sm leading-6 text-gray-700",children:a.nama_kecamatan})]}),e.jsxs("div",{className:"grid grid-cols-3 py-0.5 items-center",children:[e.jsx("div",{className:"text-sm font-medium leading-6 text-gray-900",children:"Jlh. Pemilih"}),e.jsx("div",{className:"text-sm leading-6 text-gray-700",children:a.jlh_pemilih})]}),e.jsxs("div",{className:"grid grid-cols-3 py-0.5 items-center",children:[e.jsx("div",{className:"text-sm font-medium leading-6 text-gray-900",children:"Suara Sah"}),e.jsx("div",{className:"text-sm leading-6 text-gray-700",children:a.calontpsuaras_count})]}),e.jsxs("div",{className:"grid grid-cols-3 py-0.5 items-center",children:[e.jsx("div",{className:"text-sm font-medium leading-6 text-gray-900",children:"Suara Rusak"}),a?e.jsxs("form",{onSubmit:O,className:"flex col-span-2 mt-1 gap-2 items-center justify-between",children:[e.jsx(se,{id:"suara_rusak",type:"number",name:"suara_rusak",value:b.suara_rusak,className:"block w-full",autoComplete:"suara_rusak",onChange:s=>w("suara_rusak",s.target.value)}),e.jsx("span",{children:e.jsx(D,{disabled:B,children:e.jsx("span",{children:"Kirim"})})})]}):""]})]})}),a?e.jsxs("div",{className:"py-8 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Dokumen"}),e.jsx("span",{children:e.jsxs(D,{onClick:K,children:[e.jsx(me,{className:"hidden sm:block h-5 w-5 text-gray-400 group-hover:text-gray-500 group-focus:text-gray-500"}),e.jsx("span",{className:"sm:hidden xs:block",children:"Tambah"})]})})]}),e.jsx("dd",{className:"mt-2 text-sm text-gray-900 sm:col-span-2 sm:mt-0",children:e.jsx("ul",{role:"list",className:"divide-y divide-gray-100 rounded-md border border-gray-200",children:g==null?void 0:g.map((s,n)=>e.jsxs("li",{className:"flex items-center justify-between p-2 text-sm leading-6",children:[e.jsxs("div",{className:"flex w-0 flex-1 items-center",children:[e.jsx(ne,{className:"h-4 w-4 flex-shrink-0 text-gray-400","aria-hidden":"true"}),e.jsx("div",{className:"ml-1 flex min-w-0 flex-1 gap-2",children:e.jsx("span",{className:"truncate font-medium",children:s.keterangan})})]}),e.jsxs("div",{className:"ml-2 flex-shrink-0 space-x-2",children:[e.jsx("a",{className:"group inline-flex justify-center rounded-md px-1 py-1 text-sm font-medium hover:ring-1 ring-gray-300 focus:outline-none focus:ring-2 focus:bg-gray-50 focus:ring-gray-300 transition ease-in-out duration-150",href:route("laporsuara.downloaddokumen",{partai:t.alias,tahun:d,dokumentpsuara:s.id}),target:"_blank",children:e.jsx(oe,{className:"h-4 w-4 text-gray-400 group-hover:text-gray-500 group-focus:text-gray-500"})}),e.jsx("button",{type:"button",className:"group inline-flex justify-center rounded-md px-1 py-1 text-sm font-medium hover:ring-1 ring-gray-300 focus:outline-none focus:ring-2 focus:bg-gray-50 focus:ring-gray-300 transition ease-in-out duration-150",onClick:()=>R(s),children:e.jsx(te,{className:"h-4 w-4 text-gray-400 group-hover:text-gray-500 group-focus:text-gray-500"})})]})]},n))})})]}):""]})]})})})})})})]})})]})]})}pe.layout=i=>e.jsx(V,{children:i});export{pe as default};
